{% extends "base.html" %}

{% block title %}Dashboard - Consciência Café{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">
        <i class="bi bi-speedometer2"></i> Dashboard Financeiro
    </h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="text-muted">
            <i class="bi bi-calendar"></i> 
            <span id="dataAtual"></span>
        </div>
    </div>
</div>

<!-- Cards de Resumo -->
<div class="row mb-4">
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-success">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="card-text">Receitas (30 dias)</div>
                        <h2 class="card-title">R$ --</h2>
                    </div>
                    <i class="bi bi-arrow-up-circle display-4"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-danger">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="card-text">Despesas (30 dias)</div>
                        <h2 class="card-title">R$ --</h2>
                    </div>
                    <i class="bi bi-arrow-down-circle display-4"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="card-text">Saldo Atual</div>
                        <h2 class="card-title">R$ --</h2>
                    </div>
                    <i class="bi bi-calculator display-4"></i>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="card-text">Não Conciliados</div>
                        <h2 class="card-title">--</h2>
                    </div>
                    <i class="bi bi-exclamation-circle display-4"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Gráficos e Análises -->
<div class="row mb-4">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-graph-up"></i> Fluxo de Caixa (Últimos 30 dias)
                </h5>
            </div>
            <div class="card-body">
                <div class="text-center py-5 text-muted">
                    <i class="bi bi-bar-chart display-4"></i>
                    <p class="mt-2">Gráfico de fluxo de caixa em desenvolvimento</p>
                    <small>Integração com dados do Omie em progresso</small>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-pie-chart"></i> Categorias (Este mês)
                </h5>
            </div>
            <div class="card-body">
                <div class="text-center py-4 text-muted">
                    <i class="bi bi-pie-chart display-4"></i>
                    <p class="mt-2">Análise por categorias</p>
                    <small>Em desenvolvimento</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ações Rápidas -->
<div class="row mb-4">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-lightning"></i> Ações Rápidas
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6 col-lg-4">
                        <a href="/extrato-pj" class="btn btn-outline-primary w-100">
                            <i class="bi bi-bank"></i><br>
                            Ver Extrato PJ
                        </a>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <a href="/dashboard-b2b" class="btn btn-outline-success w-100">
                            <i class="bi bi-building"></i><br>
                            Dashboard B2B
                        </a>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <button class="btn btn-outline-secondary w-100" onclick="alert('Em desenvolvimento!')">
                            <i class="bi bi-arrow-left-right"></i><br>
                            Conciliar
                        </button>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <button class="btn btn-outline-info w-100" onclick="alert('Em desenvolvimento!')">
                            <i class="bi bi-upload"></i><br>
                            Importar OFX
                        </button>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <button class="btn btn-outline-warning w-100" onclick="alert('Em desenvolvimento!')">
                            <i class="bi bi-file-earmark-text"></i><br>
                            Relatório
                        </button>
                    </div>
                    <div class="col-md-6 col-lg-4">
                        <button class="btn btn-outline-dark w-100" onclick="alert('Em desenvolvimento!')">
                            <i class="bi bi-gear"></i><br>
                            Configurações
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-clock-history"></i> Últimas Transações
                </h5>
            </div>
            <div class="card-body">
                <div class="text-center py-4 text-muted">
                    <i class="bi bi-clock display-4"></i>
                    <p class="mt-2">Últimas transações</p>
                    <small>Carregando dados...</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Status do Sistema -->
<div class="card">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="bi bi-gear"></i> Status do Sistema
        </h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-3">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-check-circle text-success me-2"></i>
                    <span>API Omie</span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-check-circle text-success me-2"></i>
                    <span>Sistema ML</span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-check-circle text-success me-2"></i>
                    <span>Processamento OFX</span>
                </div>
            </div>
            <div class="col-md-3">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-gear text-warning me-2"></i>
                    <span>Conciliação Auto</span>
                </div>
            </div>
        </div>
        <hr>
        <div class="row text-center">
            <div class="col-md-4">
                <h5 class="text-primary">374</h5>
                <small class="text-muted">Padrões ML</small>
            </div>
            <div class="col-md-4">
                <h5 class="text-success">681</h5>
                <small class="text-muted">Transações Conciliadas</small>
            </div>
            <div class="col-md-4">
                <h5 class="text-info">2</h5>
                <small class="text-muted">Contas Ativas</small>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    // Atualizar data atual
    document.addEventListener('DOMContentLoaded', function() {
        const agora = new Date();
        const opcoes = { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        };
        document.getElementById('dataAtual').textContent = 
            agora.toLocaleDateString('pt-BR', opcoes);
    });
    
    // Função para carregar dados do dashboard (implementar futuramente)
    async function carregarDashboard() {
        // TODO: Implementar carregamento dos dados resumo
        console.log('Dashboard data loading - TODO');
    }
</script>
{% endblock %}